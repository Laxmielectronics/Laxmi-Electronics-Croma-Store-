<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Repair Appointment Booking</title>

<style>
body{
  font-family:Arial;
  background:#f4f6f8;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.card{
  background:white;
  padding:30px;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,0.1);
  width:350px;
}

input{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  border:1px solid #ccc;
}

button{
  width:100%;
  padding:12px;
  background:#25D366;
  color:white;
  border:none;
  border-radius:6px;
  font-size:16px;
}

.status{
  text-align:center;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="card">

<h2>Book Repair Appointment</h2>

<input id="name" placeholder="Customer Name">
<input id="phone" placeholder="Phone 91XXXXXXXXXX">
<input id="birthday" placeholder="Birthday MM-DD">

<input id="product" placeholder="Product (TV / AC / Fridge)">
<input id="issue" placeholder="Problem / Issue">
<input id="date" type="date">

<button onclick="saveData()">Submit Booking</button>

<div class="status" id="status"></div>

</div>

<script>

async function saveData(){

const name=document.getElementById('name').value;
const phone=document.getElementById('phone').value;
const birthday=document.getElementById('birthday').value;
const product=document.getElementById('product').value;
const issue=document.getElementById('issue').value;
const date=document.getElementById('date').value;

if(!name||!phone){
document.getElementById('status').innerText="❌ Fill required fields";
return;
}

const repoOwner="YOUR_GITHUB_USERNAME";
const repoName="YOUR_REPO_NAME";
const filePath="repair-bookings.csv";
const token="YOUR_GITHUB_TOKEN";

const apiUrl=`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`;

try{

const getFile=await fetch(apiUrl,{
headers:{Authorization:`token ${token}`}
});

const fileData=await getFile.json();
const existingContent=atob(fileData.content);

const newRow=`\n${name},${phone},${birthday},${product},${issue},${date}`;
const updatedContent=btoa(existingContent+newRow);

await fetch(apiUrl,{
method:"PUT",
headers:{
Authorization:`token ${token}`,
"Content-Type":"application/json"
},
body:JSON.stringify({
message:"New Repair Booking",
content:updatedContent,
sha:fileData.sha
})
});

document.getElementById('status').innerText="✅ Booking Saved";

}catch(err){
document.getElementById('status').innerText="❌ Error saving";
}

}

</script>

</body>
</html>
